<!DOCTYPE html>




    
    

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link href="http://fonts.googleapis.com/css?family=Exo+2:700|Open+Sans:400italic,400&subset=latin,cyrillic" rel="stylesheet" type="text/css">
    <title>Интеграция Allure с JUnit</title>
    <meta name="viewport" content="width=device-width">

    <link  href="//yandex.st/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet">
    <link  href="//fotorama.s3.amazonaws.com/4.4.8/fotorama.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/main.css">

    <script src="//yandex.st/jquery/2.0.3/jquery.min.js"></script>
    <script src="//fotorama.s3.amazonaws.com/4.4.8/fotorama.js"></script>
</head>
<body>

<header class="header">
    <div class="container">
        <h1 class="title"><a href="/ru/">Allure Framework</a></h1>
        <ul class="menu">
            <li><a class="menu__title" href="/ru/">Главная</a></li>
            
            
            <li class="menu__menu java">
                
                <span class="menu__title">java</span>
                <ul class="dropdown">
                
                    <li class="dropdown__item"><a href="/ru/langs/java/junit.html">junit</a></li>
                
                    <li class="dropdown__item"><a href="/ru/langs/java/testng.html">testng</a></li>
                
                </ul>
            </li>
            
            <li class="menu__menu javascript">
                
                <span class="menu__title">javascript</span>
                <ul class="dropdown">
                
                    <li class="dropdown__item"><a href="/ru/langs/javascript/karma.html">karma</a></li>
                
                </ul>
            </li>
            
            <li class="menu__menu python">
                
                <span class="menu__title">python</span>
                <ul class="dropdown">
                
                    <li class="dropdown__item"><a href="/ru/langs/python/pytest.html">pytest</a></li>
                
                </ul>
            </li>
            
            <li>
                
                    <a class="menu__title" href="/">English Version</a>
                
            </li>
        </ul>
        <div class="pull-right">
            <a class="qatools" href="http://qatools.ru"></a>
        </div>
    </div>
</header>
<div class="page content container">
<h2>Allure JUnit integration module</h2>

<p>Чтобы подключить <strong>Allure</strong> к <strong>JUnit</strong>, нужно просто добавить следующий блок в свой <strong>pom.xml</strong>:</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml"><span class="c">&lt;!--Версия Allure, необходима для allure-maven-plugin --&gt;</span>
<span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;allure.version&gt;</span>1.2.2<span class="nt">&lt;/allure.version&gt;</span>
<span class="nt">&lt;/properties&gt;</span>

<span class="c">&lt;!--Зависимость от Allure JUnit plugin --&gt;</span>
<span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>ru.yandex.qatools.allure<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>allure-junit-adaptor<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${allure.version}<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>

<span class="c">&lt;!--Allure JUnit plugin --&gt;</span>
<span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>ru.yandex.qatools.allure<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>allure-junit-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${allure.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
                <span class="nt">&lt;execution&gt;</span>
                    <span class="nt">&lt;phase&gt;</span>test-compile<span class="nt">&lt;/phase&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                        <span class="nt">&lt;goal&gt;</span>allure<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>

<span class="c">&lt;!--Allure Maven Plugin--&gt;</span>
<span class="nt">&lt;reporting&gt;</span>
    <span class="nt">&lt;excludeDefaults&gt;</span>true<span class="nt">&lt;/excludeDefaults&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>ru.yandex.qatools.allure<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>allure-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${allure.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/reporting&gt;</span>
</code></pre></div>
<h3>Steps and attachments</h3>

<p>Вы можете добавлять шаги(steps) и вложения(attachments), добавив аннотацию
<strong>@ru.yandex.qatools.allure.annotations.Step</strong> к соответствующим методам:</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="nd">@Step</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">openPageByAddress</span><span class="o">(</span><span class="n">String</span> <span class="n">pageAddress</span><span class="o">)</span> <span class="o">{</span>
     <span class="o">...</span>
 <span class="o">}</span>
</code></pre></div>
<p>Если вам нужно сохранить вложение до окончания теста, то вы можете создать attach-метод. Он должет быть проаннотирован
<strong>@ru.yandex.qatools.allure.annotations.Attach</strong> и возвращать  <strong>java.lang.String</strong> или <strong>java.io.File</strong>.</p>

<p>Возвращаемое значение будет скопировано и добавлено в ваш отчет как вложение.</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="nd">@Attach</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">saveLog</span><span class="o">(</span><span class="n">Logger</span> <span class="n">logger</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
<span class="o">}</span>
</code></pre></div>
<p>Смотрите <a href="https://github.com/allure-framework/allure/blob/master/docs/steps-and-attachments.md">здесь</a> подробнее о шагах и вложениях.</p>

</div>

<footer class="footer">
    <div class="container">
        <span>
            <span class="contact">Allure Framework</span>
            <span class="contact">
                <a href="https://github.com/allure-framework">GitHub</a>
            </span>
            <span class="contact"><a href="mailto:allure@yandex-team.ru">allure@yandex-team.ru</a></span>
        </span>
        <div class="strut"></div>
    </div>
</footer>

</body>
</html>
